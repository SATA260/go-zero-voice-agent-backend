syntax = "v1"

info (
	title:   "llm实例"
	desc:    "llm配置管理"
	author:  "2penheimer"
	email:   "2603237065@qq.com"
	version: "v1"
)

import (
	"chatmessage/chatmessage.api"
	"chatsession/chatsession.api"
	"llmconfig/llmconfig.api"
	"llmchat/llmchat.api"
)

type (
	PageQuery {
		Page     int64  `json:"page"`
		PageSize int64  `json:"pageSize"`
		OrderBy  string `json:"orderBy"`
	}
)

// Server & Service
@server (
	group:  chat
	prefix: llm/v1/chat
)
service llm {
	@doc "进行文字对话"
	@handler TextChat
	post /text (TextChatReq) returns (TextChatResp)
}

@server (
	group:  config
	prefix: llm/v1/config
)
service llm {
	@doc "创建配置"
	@handler CreateConfig
	post /create (CreateConfigReq) returns (CreateConfigResp)

	@doc "删除配置"
	@handler DeleteConfig
	delete /:id (DeleteConfigReq) returns (DeleteConfigResp)

	@doc "更新配置"
	@handler UpdateConfig
	put /:id (UpdateConfigReq) returns (UpdateConfigResp)

	@doc "获取配置详情"
	@handler GetConfig
	get /:id (GetConfigReq) returns (GetConfigResp)

	@doc "分页查询我的配置"
	@handler ListMyConfig
	post /list (ListMyConfigReq) returns (ListMyConfigResp)
}

@server (
	group:  chatsession
	prefix: llm/v1/chat-session
)
service llm {
	@doc "查询会话详情"
	@handler GetChatSession
	get /:id (GetChatSessionReq) returns (GetChatSessionResp)

	@doc "分页查询会话列表"
	@handler ListChatSession
	post /list (ListChatSessionReq) returns (ListChatSessionResp)

	@doc "删除会话"
	@handler DeleteChatSession
	delete /:id (DeleteChatSessionReq) returns (DeleteChatSessionResp)
}

@server (
	group:  chatmessage
	prefix: llm/v1/chat-message
)
service llm {
	@doc "根据会话分页查询消息"
	@handler ListChatMessageBySession
	post /list (ListChatMessageBySessionReq) returns (ListChatMessageBySessionResp)

	@doc "删除聊天消息"
	@handler DeleteChatMessage
	delete /:id (DeleteChatMessageReq) returns (DeleteChatMessageResp)
}

